%\usepackage{calc}
%\usepackage{ifthen}
\usepackage{fp}
\newcommand{\myPlotFunction}[6]{
  \iftrue
    \FPset\myMaxX{#3}
    \FPset\myMinY{#4}
    \FPmax{\myMaxY}{1}{#5}
  \else
    \foreach \x/\y [count=\ii] in \myPoints{
      \ifnum\ii=1
        \FPeval\myMaxX{\x}
        \FPeval\myMinY{\y}
        \FPeval\myMaxY{\y}
      \else
        \FPmax\myMaxX\x\myMaxX
        \FPmin\myMinY\y\myMinY
        \FPmax\myMaxY\y\myMaxY
      \fi
    }
    \FPmax{\myMaxY}{1}{\myMaxY}
  \fi

  \FPmin{\myPlotMinY}{\myMinY}{0}

  %%grid
  \draw[step=1, line width=0.1mm, black!30!white] 
    (-.5,\myPlotMinY-.2) grid (\myMaxX+.2,\myMaxY+.5);

  %%axis
  \iftrue
    \draw[->] (-.5,0) -- (\myMaxX+.2,0);
    \draw[->] (0,\myPlotMinY-.2) -- (0,\myMaxY+.7);
  \else
    \draw[->] (-.5,0) -- (\myMaxX+.2,0) node[below]{$u$};
    \draw[->] (0,\myPlotMinY-.2) -- (0,\myMaxY+.7) node[left]{$v$};
  \fi
  \iftrue
    \draw (1,0) -- (1,-.1);
    \draw (0,1) -- (-.1,1);
  \else
    \draw (1,0) -- node[below]{\footnotesize$1$} (1,-.1);
    \draw (0,1) -- node[left]{\footnotesize$1$} (-.1,1);
  \fi

  %%rectangle
  \foreach \x/\y in #1
    { \fill[blue,opacity=.2] (-.5,\myMaxY+.5) rectangle (\x,\y); }

  %%path
  \draw[color=purple,thick] (-.5,\myMinY) --(0,\myMinY) #2 
    -- (\myMaxX,\myMaxY+.5);

  %%nodes
  \foreach \x/\y in #1
    { \node[draw,circle,inner sep=1.5pt,fill=white] at (\x,\y) {}; }
  %%Text
  \node[below right] at (#3,\myMaxY) {#6};
}
